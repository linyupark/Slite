// Generated by CoffeeScript 1.4.0

/*
最后一个字符
*/


(function() {
  var cleanCN, cleanHTML, fetchCN, getQuery, highlight, isCn, isInt, lastChar, ltrim, rtrim, summary, trim, unhighlight, uniqueID;

  lastChar = function(str) {
    return str.charAt(str.length - 1);
  };

  /*
  去除字符串左右空格
  */


  trim = function(str) {
    return str.replace(/^\s+|\s+$/g, '');
  };

  ltrim = function(str) {
    return str.replace(/^\s+/g, '');
  };

  rtrim = function(str) {
    return str.replace(/\s+$/g, '');
  };

  /*
  扩展String！是否包含某字符
  */


  if (!String.prototype.contains) {
    String.prototype.contains = function(str) {
      return this.indexOf(str) !== -1;
    };
  }

  /*
  创建一个随机字符串ID
  */


  uniqueID = function(len) {
    var id;
    if (len == null) {
      len = 8;
    }
    id = "";
    while (id.length < len) {
      id += Math.random().toString(36).substr(2);
    }
    return id.substr(0, len);
  };

  /*
  扩展String！重复显示字符串
  */


  if (!String.prototype.repeat) {
    String.prototype.repeat = function(times) {
      return Array(times).join(this);
    };
  }

  /*
  判断是否为Int
  */


  isInt = function(str) {
    return str.match(/[0-9 -()+]+$/) !== null;
  };

  /*
  扩展String！字符串内容倒叙
  */


  if (!String.prototype.reverse) {
    String.prototype.reverse = function() {
      return this.split('').reverse().join('');
    };
  }

  /*
  提取中文
  */


  fetchCN = function(str) {
    return str.replace(/[u4e00-u9fa5]/g, '');
  };

  /*
  过滤中文
  */


  cleanCN = function(str) {
    return str.replace(/[^u4e00-u9fa5]/g, '');
  };

  /*
  是否全中文
  */


  isCn = function(str) {
    return /[u4e00-u9fa5]/.test(str) === false;
  };

  /*
  过滤html标签
  */


  cleanHTML = function(html) {
    var div;
    div = document.createElement('div');
    div.innerHTML = html;
    return div.textContent || div.innerText || '';
  };

  /*
  url en|decode 缩写
  */


  if (!String.prototype.urlencode) {
    String.prototype.urlencode = function() {
      return encodeURIComponent(this);
    };
  }

  if (!String.prototype.urldecode) {
    String.prototype.urldecode = function() {
      return decodeURIComponent(this);
    };
  }

  /*
  获取URL地址中某参数值
  */


  getQuery = function(name, url) {
    if (url == null) {
      url = window.location.href;
    }
    return new RegExp("[\\?&amp;]" + name + "=([^&amp;#]*)").exec(url)[1];
  };

  /*
  高亮
  */


  highlight = function(str, words, tag) {
    var re, w, _i, _len;
    if (words == null) {
      words = [];
    }
    if (tag == null) {
      tag = 'span';
    }
    if (words.length === 0) {
      return false;
    }
    for (_i = 0, _len = words.length; _i < _len; _i++) {
      w = words[_i];
      re = new RegExp(w, 'g');
      if (re.test(str)) {
        str = str.replace(re, "<" + tag + " class='highlight'>$&</" + tag + ">");
      }
    }
    return str;
  };

  /*
  取消高亮
  */


  unhighlight = function(str, tag) {
    var re;
    if (tag == null) {
      tag = 'span';
    }
    re = new RegExp("(<" + tag + " class='highlight'>|<\/" + tag + ">)", 'g');
    if (re.test(str)) {
      return str.replace(re, '');
    }
  };

  /*
  概要
  */


  summary = function(str, limit, tail) {
    if (tail == null) {
      tail = '...';
    }
    str = str.split('');
    if (str.length > limit) {
      str = str.slice(0, limit);
      str.push(tail);
    }
    return str.join('');
  };

}).call(this);
